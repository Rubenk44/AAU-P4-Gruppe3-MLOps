schema: '2.0'
stages:
  augmented_data:
    cmd: python dataset/augment.py
    deps:
    - path: dataset/augment.py
      hash: md5
      md5: e978a10dce429c4c0085b68f706fa246
      size: 1977
    - path: dataset/original_data/cifar-10-batches-py
      hash: md5
      md5: 2c2c368a819f1df18fd0afa1c052c6c4.dir
      size: 186214114
      nfiles: 8
    outs:
    - path: dataset/augmented_data/cifar-10-batches-py
      hash: md5
      md5: 92e54f98fe9d2c7159ae3c5668728b7b.dir
      size: 186017936
      nfiles: 7
  model_org:
    cmd: python train.py
    deps:
    - path: dataset/original_data/cifar-10-batches-py
      hash: md5
      md5: 2c2c368a819f1df18fd0afa1c052c6c4.dir
      size: 186214114
      nfiles: 8
    - path: config.yaml
      hash: md5
      md5: 61b020b029e74eb302eb2e4ba1b72cc7
      size: 1192
    - path: modelstructure.py
      hash: md5
      md5: 12aa8672989b76511d1434707b594549
      size: 912
    - path: requirements.txt
      hash: md5
      md5: 24262a50f9fc3e1429f03362d18ec43d
      size: 175
    - path: train.py
      hash: md5
      md5: 9eb31b686fbb3179e7f72e2e93454ff1
      size: 2891
    - path: utils/dataloader.py
      hash: md5
      md5: e67078223fe3492a5945a5b95fcd6d23
      size: 6055
    - path: utils/utils.py
      hash: md5
      md5: ad84eb15f73afce65d374c3f6c9cf0fd
      size: 2166
    outs:
    - path: models/model_org/config.json
      hash: md5
      md5: e887a28d781bcaaa313f712b13d0f605
      size: 2215
    - path: models/model_org/model.onnx
      hash: md5
      md5: 309725421f6df4e6e08d392a31e6ad53
      size: 250384
  deepspeed_stage_1:
    cmd: deepspeed --num_gpus=1 train.py
    deps:
    - path: dataset/original_data/cifar-10-batches-py
      hash: md5
      md5: 2c2c368a819f1df18fd0afa1c052c6c4.dir
      size: 186214114
      nfiles: 8
    - path: config.yaml
      hash: md5
      md5: 7d6c260d364962074451b1b45e9a2ecc
      size: 1490
    - path: modelstructure.py
      hash: md5
      md5: 12aa8672989b76511d1434707b594549
      size: 912
    - path: requirements.txt
      hash: md5
      md5: 35b9a9785a2fb871732f7a7a9c33481d
      size: 193
    - path: train.py
      hash: md5
      md5: ca3a5d397ca1e8c1cdd8d052842f1d46
      size: 3083
    - path: utils/dataloader.py
      hash: md5
      md5: 0ee63b41535c867423a309a8fcfc0d75
      size: 6220
    - path: utils/utils.py
      hash: md5
      md5: 68f50570496bf86d1efe53b70a7e8049
      size: 2298
    outs:
    - path: models/deepspeed_stage_1/config.json
      hash: md5
      md5: 4c5d88cc9f9be0a0cbbbfa8fd03881e9
      size: 2609
    - path: models/deepspeed_stage_1/model.onnx
      hash: md5
      md5: 6da3fa251066c22b840b537614af1701
      size: 250384
  deepspeed_stage_2:
    cmd: deepspeed --num_gpus=1 train.py
    deps:
    - path: dataset/original_data/cifar-10-batches-py
      hash: md5
      md5: 2c2c368a819f1df18fd0afa1c052c6c4.dir
      size: 186214114
      nfiles: 8
    - path: config.yaml
      hash: md5
      md5: e493951f87e74e43d4328f81ca06f181
      size: 1490
    - path: modelstructure.py
      hash: md5
      md5: 12aa8672989b76511d1434707b594549
      size: 912
    - path: requirements.txt
      hash: md5
      md5: 35b9a9785a2fb871732f7a7a9c33481d
      size: 193
    - path: train.py
      hash: md5
      md5: ca3a5d397ca1e8c1cdd8d052842f1d46
      size: 3083
    - path: utils/dataloader.py
      hash: md5
      md5: 0ee63b41535c867423a309a8fcfc0d75
      size: 6220
    - path: utils/utils.py
      hash: md5
      md5: ed49b96eabca61d918d2d5029e64cf20
      size: 2460
    outs:
    - path: models/deepspeed_stage_2/config.json
      hash: md5
      md5: 9706000e0829c7516241babb84d6eca8
      size: 2609
    - path: models/deepspeed_stage_2/model.onnx
      hash: md5
      md5: 6da3fa251066c22b840b537614af1701
      size: 250384
  quantize_stage_1:
    cmd: python Lecture4/quantize.py
    deps:
    - path: Lecture4/quantize.py
      hash: md5
      md5: fa1df251c04facfabdf6db7bb9512993
      size: 666
    - path: models/deepspeed_stage_1/model.onnx
      hash: md5
      md5: 6da3fa251066c22b840b537614af1701
      size: 250384
    - path: requirements.txt
      hash: md5
      md5: a2df253c530e81201758f18a8031017f
      size: 207
    outs:
    - path: models/deepspeed_stage_1/model_quantized.onnx
      hash: md5
      md5: 7a9e55f05ce338426d281bbdb2677178
      size: 70234
  quantize_stage_2:
    cmd: python Lecture4/quantize.py
    deps:
    - path: Lecture4/quantize.py
      hash: md5
      md5: 6978858643b85ee71ad2c4eb8a6c6321
      size: 666
    - path: models/deepspeed_stage_2/model.onnx
      hash: md5
      md5: 6da3fa251066c22b840b537614af1701
      size: 250384
    - path: requirements.txt
      hash: md5
      md5: a2df253c530e81201758f18a8031017f
      size: 207
    outs:
    - path: models/deepspeed_stage_2/model_quantized.onnx
      hash: md5
      md5: 7a9e55f05ce338426d281bbdb2677178
      size: 70234
  deepspeed_stage_3:
    cmd: deepspeed --num_gpus=1 train.py
    deps:
    - path: config.yaml
      hash: md5
      md5: fa8c103e20d2f5cff907dd6114cf5070
      size: 1468
    - path: dataset/original_data/cifar-10-batches-py
      hash: md5
      md5: 2c2c368a819f1df18fd0afa1c052c6c4.dir
      size: 186214114
      nfiles: 8
    - path: modelstructure.py
      hash: md5
      md5: 12aa8672989b76511d1434707b594549
      size: 912
    - path: requirements.txt
      hash: md5
      md5: a2df253c530e81201758f18a8031017f
      size: 207
    - path: train.py
      hash: md5
      md5: 37a6f939c081c3b6047f8cdb10f65d39
      size: 3053
    - path: utils/dataloader.py
      hash: md5
      md5: 0ee63b41535c867423a309a8fcfc0d75
      size: 6220
    - path: utils/utils.py
      hash: md5
      md5: ed49b96eabca61d918d2d5029e64cf20
      size: 2460
    outs:
    - path: models/deepspeed_stage_3/config.json
      hash: md5
      md5: e62e5e6bef028bd88ddf575fd60e1cb9
      size: 2609
    - path: models/deepspeed_stage_3/model.onnx
      hash: md5
      md5: eda2e02397a98b9b9a50aa3b08950582
      size: 250384
  quantize_stage_3:
    cmd: python Lecture4/quantize.py
    deps:
    - path: Lecture4/quantize.py
      hash: md5
      md5: c97245ee80328eae447f1dc93809d4b0
      size: 666
    - path: models/deepspeed_stage_3/model.onnx
      hash: md5
      md5: eda2e02397a98b9b9a50aa3b08950582
      size: 250384
    - path: requirements.txt
      hash: md5
      md5: a2df253c530e81201758f18a8031017f
      size: 207
    outs:
    - path: models/deepspeed_stage_3/model_quantized.onnx
      hash: md5
      md5: c3e14adbacb6fe99fdaee68f5bb649f2
      size: 70234
  quantize_model_org:
    cmd: python Lecture4/quantize.py
    deps:
    - path: Lecture4/quantize.py
      hash: md5
      md5: eee8877328711dcd9d401d6d97805ff4
      size: 650
    - path: models/model_org/model.onnx
      hash: md5
      md5: 309725421f6df4e6e08d392a31e6ad53
      size: 250384
    - path: requirements.txt
      hash: md5
      md5: a2df253c530e81201758f18a8031017f
      size: 207
    outs:
    - path: models/model_org/model_quantized.onnx
      hash: md5
      md5: 5f87c9c66357a368f27183620326ebd2
      size: 70235
