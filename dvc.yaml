stages:
  augment:
    cmd: python dataset/augment.py
    deps:
    - dataset/augment.py
    - dataset/original_data/cifar-10-batches-py
    outs:
    - dataset/augmented_data/cifar-10-batches-py
  model_org:
    cmd: python train.py
    deps:
    - config.yaml
    - modelstructure.py
    - requirements.txt
    - train.py
    - utils/dataloader.py
    - utils/utils.py
    outs:
    - models/configs/config_org.json
    - models/onnx/model_org.onnx
  deepspeed_stage_1:
    cmd: deepspeed --num_gpus=1 train.py
    deps:
    - config.yaml
    - modelstructure.py
    - requirements.txt
    - train.py
    - utils/dataloader.py
    - utils/utils.py
    outs:
    - models/configs/deepspeed_stage_1.json
    - models/onnx/deepspeed_stage_1.onnx
